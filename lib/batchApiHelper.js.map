{"version":3,"sources":["lib/batchApiHelper.js"],"names":["platform","url","query","body","boundry","uuid","options","headers","_contentType","_multipartContentType","reduce","data","item","_jsonContentType","put","result","multipart","batchPutApi","replace","c","r","Math","random","v","toString"],"mappings":";;;;;;;;;;;;;;;;;;;;wEAUO;AAAA,QAA6BA,QAA7B,SAA6BA,QAA7B;AAAA,QAAuCC,GAAvC,SAAuCA,GAAvC;AAAA,QAA4CC,KAA5C,SAA4CA,KAA5C;AAAA,QAAmDC,IAAnD,SAAmDA,IAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AACCC,mBADD,iBACuBC,MADvB;AAECC,mBAFD,GAEW,EAAEC,SAAS,EAAX,EAFX;;AAGLD,oBAAQC,OAAR,CAAgB,sBAAYC,YAA5B,IACO,sBAAYC,qBADnB,mBACsDL,OADtD;AAEAD,mBAAOA,KAAKO,MAAL,CAAY,UAACC,IAAD,EAAOC,IAAP,EAAgB;AACjCD,6BAAaP,OAAb;AACAO,sBAAW,sBAAYH,YAAvB,UAAwC,sBAAYK,gBAApD;AACAF,sBAAW,yBAAeC,KAAKT,IAApB,CAAX;AACA,qBAAOQ,IAAP;AACD,aALM,EAKJ,EALI,CAAP;AAMAR,2BAAaC,OAAb;AAXK;AAAA,mBAYgBJ,SAASc,GAAT,CAAab,GAAb,EAAkBE,IAAlB,EAAwBD,KAAxB,EAA+BI,OAA/B,CAZhB;;AAAA;AAYCS,kBAZD;AAAA,6CAaEA,OAAOC,SAAP,EAbF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAeC,W;;;;;AAVtB;;;;;;AAEA,SAASZ,IAAT,GAAgB;AACd,SAAO,uCAAuCa,OAAvC,CAA+C,OAA/C,EAAwD,UAACC,CAAD,EAAO;AACpE,QAAMC,IAAIC,KAAKC,MAAL,KAAgB,EAAhB,GAAqB,CAA/B;AACA,QAAMC,IAAIJ,MAAM,GAAN,GAAYC,CAAZ,GAAiBA,IAAI,GAAJ,GAAU,GAArC;AACA,WAAOG,EAAEC,QAAF,CAAW,EAAX,CAAP;AACD,GAJM,CAAP;AAKD","file":"batchApiHelper.js","sourcesContent":["import ApiResponse from 'ringcentral/src/http/ApiResponse';\n\nfunction uuid() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    const r = Math.random() * 16 | 0;\n    const v = c === 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\nexport async function batchPutApi({ platform, url, query, body }) {\n  const boundry = `Boundary_${uuid()}`;\n  const options = { headers: {} };\n  options.headers[ApiResponse._contentType]\n    = `${ApiResponse._multipartContentType}; boundary=${boundry}`;\n  body = body.reduce((data, item) => {\n    data += `--${boundry}\\r\\n`;\n    data += `${ApiResponse._contentType}: ${ApiResponse._jsonContentType}\\r\\n\\r\\n`;\n    data += `${JSON.stringify(item.body)}\\r\\n`;\n    return data;\n  }, '');\n  body += `--${boundry}--`;\n  const result = await platform.put(url, body, query, options);\n  return result.multipart();\n}\n"]}