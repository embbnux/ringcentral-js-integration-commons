{"version":3,"sources":["modules/Webphone/getWebphoneReducer.js"],"names":["getVideoElementPreparedReducer","getConnectionStatusReducer","getErrorCodeReducer","getConnectRetryCountsReducer","getWebphoneCountsReducer","getActiveSessionIdReducer","getRingSessionIdReducer","getSessionsReducer","getUserMediaReducer","getWebphoneReducer","types","state","type","videoElementPrepared","disconnected","connect","reconnect","connecting","registered","connected","unregistered","disconnect","disconnecting","connectError","registrationFailed","connectFailed","errorCode","resetRetryCounts","sessionId","callStart","callEnd","callRing","sessions","updateSessions","destroySessions","getUserMediaSuccess","status","connectionStatus","connectRetryCounts","webphoneCounts","activeSessionId","ringSessionId"],"mappings":"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","file":"getWebphoneReducer.js","sourcesContent":["import { combineReducers } from 'redux';\nimport getModuleStatusReducer from '../../lib/getModuleStatusReducer';\nimport connectionStatus from './connectionStatus';\n\nexport function getVideoElementPreparedReducer(types) {\n  return (state = false, { type }) => {\n    if (type === types.videoElementPrepared) return true;\n    return state;\n  };\n}\n\nexport function getConnectionStatusReducer(types) {\n  return (state = connectionStatus.disconnected, { type }) => {\n    switch (type) {\n      case types.connect:\n      case types.reconnect:\n        return connectionStatus.connecting;\n      case types.registered:\n        return connectionStatus.connected;\n      case types.unregistered:\n        return connectionStatus.disconnected;\n      case types.disconnect:\n        return connectionStatus.disconnecting;\n      case types.connectError:\n      case types.registrationFailed:\n        return connectionStatus.connectFailed;\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getErrorCodeReducer(types) {\n  return (state = null, { type, errorCode = state }) => {\n    switch (type) {\n      case types.connectError:\n      case types.registrationFailed:\n        return errorCode;\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getConnectRetryCountsReducer(types) {\n  return (state = 0, { type }) => {\n    switch (type) {\n      case types.reconnect:\n        return state + 1;\n      case types.resetRetryCounts:\n      case types.registered:\n        return 0;\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getWebphoneCountsReducer(types) {\n  return (state = 0, { type }) => {\n    switch (type) {\n      case types.reconnect:\n      case types.connect:\n        return state + 1;\n      case types.connectError:\n      case types.disconnect:\n      case types.registrationFailed:\n        return state - 1;\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getActiveSessionIdReducer(types) {\n  return (state = null, { type, sessionId }) => {\n    switch (type) {\n      case types.callStart:\n        return sessionId;\n      case types.callEnd:\n        if (sessionId === state) {\n          return null;\n        }\n        return state;\n      case types.disconnect:\n        return null;\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getRingSessionIdReducer(types) {\n  return (state = null, { type, sessionId }) => {\n    switch (type) {\n      case types.callRing:\n        return sessionId;\n      case types.callStart:\n      case types.callEnd:\n        if (sessionId === state) {\n          return null;\n        }\n        return state;\n      case types.disconnect:\n        return null;\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getSessionsReducer(types) {\n  return (state = [], { type, sessions }) => {\n    switch (type) {\n      case types.updateSessions:\n        return sessions;\n      case types.destroySessions:\n        return [];\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getUserMediaReducer(types) {\n  return (state = false, { type }) => {\n    switch (type) {\n      case types.getUserMediaSuccess:\n        return true;\n      default:\n        return state;\n    }\n  };\n}\n\nexport default function getWebphoneReducer(types) {\n  return combineReducers({\n    status: getModuleStatusReducer(types),\n    videoElementPrepared: getVideoElementPreparedReducer(types),\n    connectionStatus: getConnectionStatusReducer(types),\n    connectRetryCounts: getConnectRetryCountsReducer(types),\n    errorCode: getErrorCodeReducer(types),\n    webphoneCounts: getWebphoneCountsReducer(types),\n    activeSessionId: getActiveSessionIdReducer(types),\n    ringSessionId: getRingSessionIdReducer(types),\n    sessions: getSessionsReducer(types),\n  });\n}\n"]}