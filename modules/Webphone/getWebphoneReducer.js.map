{"version":3,"sources":["modules/Webphone/getWebphoneReducer.js"],"names":["getVideoElementPreparedReducer","getConnectionStatusReducer","getConnectRetryCountsReducer","getWebphoneCountsReducer","getCurrentSessionReducer","getSessionsReducer","getWebphoneReducer","types","state","type","videoElementPrepared","init","disconnected","connect","reconnect","connecting","registered","connected","unregistered","disconnect","disconnecting","connectError","registrationFailed","connectFailed","resetRetryCounts","session","updateCurrentSession","destroyCurrentSession","sessions","newSessions","updateSessions","forEach","push","destroySessions","status","connectionStatus","connectRetryCounts","webphoneCounts","currentSession"],"mappings":"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","file":"getWebphoneReducer.js","sourcesContent":["import { combineReducers } from 'redux';\nimport getModuleStatusReducer from '../../lib/getModuleStatusReducer';\n\nimport { normalizeSession } from './webphoneHelper';\nimport connectionStatus from './connectionStatus';\n\nexport function getVideoElementPreparedReducer(types) {\n  return (state = false, { type, videoElementPrepared = state }) => {\n    if (type === types.init) return videoElementPrepared;\n    return state;\n  };\n}\n\nexport function getConnectionStatusReducer(types) {\n  return (state = connectionStatus.disconnected, { type }) => {\n    switch (type) {\n      case types.connect:\n      case types.reconnect:\n        return connectionStatus.connecting;\n      case types.registered:\n        return connectionStatus.connected;\n      case types.unregistered:\n        return connectionStatus.disconnected;\n      case types.disconnect:\n        return connectionStatus.disconnecting;\n      case types.connectError:\n      case types.registrationFailed:\n        return connectionStatus.connectFailed;\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getConnectRetryCountsReducer(types) {\n  return (state = 0, { type }) => {\n    switch (type) {\n      case types.reconnect:\n        return state + 1;\n      case types.resetRetryCounts:\n      case types.registered:\n        return 0;\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getWebphoneCountsReducer(types) {\n  return (state = 0, { type }) => {\n    switch (type) {\n      case types.connect:\n        return state + 1;\n      case types.disconnect:\n        return state - 1;\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getCurrentSessionReducer(types) {\n  return (state = null, { type, session }) => {\n    switch (type) {\n      case types.updateCurrentSession:\n        return normalizeSession(session);\n      case types.destroyCurrentSession:\n        return null;\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getSessionsReducer(types) {\n  return (state = [], { type, sessions }) => {\n    const newSessions = [];\n    switch (type) {\n      case types.updateSessions:\n        sessions.forEach((session) => {\n          newSessions.push(normalizeSession(session));\n        });\n        return newSessions;\n      case types.destroySessions:\n        return null;\n      default:\n        return state;\n    }\n  };\n}\n\nexport default function getWebphoneReducer(types) {\n  return combineReducers({\n    status: getModuleStatusReducer(types),\n    videoElementPrepared: getVideoElementPreparedReducer(types),\n    connectionStatus: getConnectionStatusReducer(types),\n    connectRetryCounts: getConnectRetryCountsReducer(types),\n    webphoneCounts: getWebphoneCountsReducer(types),\n    currentSession: getCurrentSessionReducer(types),\n    sessions: getSessionsReducer(types),\n  });\n}\n"]}