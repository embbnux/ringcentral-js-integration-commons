{"version":3,"sources":["modules/Webphone/webphoneHelper.js"],"names":["session","sendReceiveConfirm","console","error","isBrowerSupport","normalizeSession","isRing","isOnHold","isChrome","navigator","userAgent","match","chromeVersion","parseInt","id","direction","callStatus","to","request","uri","user","toUserName","displayName","from","fromUserName","startTime","Date","getTime","creationTime","local","isOnMute","isOnFlip","isOnTransfer","isToVoicemail","isForwarded","isReplied","recordStatus","idle","contactMatch","minimized","inbound","connecting","onHold"],"mappings":";;;;;;;;;;;;;;;;wEAqDO,iBAAkCA,OAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEGA,QAAQC,kBAAR,EAFH;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAIHC,oBAAQC,KAAR;;AAJG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAeF,kB;;;;;QAjDNG,e,GAAAA,e;QAaAC,gB,GAAAA,gB;QAwBAC,M,GAAAA,M;QAQAC,Q,GAAAA,Q;;AAjDhB;;;;AACA;;;;AACA;;;;;;AAEO,SAASH,eAAT,GAA2B;AAChC,MAAMI,WAAW,CAAC,CAAEC,UAAUC,SAAV,CAAoBC,KAApB,CAA0B,cAA1B,CAApB;AACA,MAAI,CAACH,QAAL,EAAe;AACb,WAAO,KAAP;AACD;AACD,MAAMI,gBACJC,SAASJ,UAAUC,SAAV,CAAoBC,KAApB,CAA0B,0BAA1B,EAAsD,CAAtD,CAAT,EAAmE,EAAnE,CADF;AAEA,MAAIC,iBAAiB,EAArB,EAAyB;AACvB,WAAO,IAAP;AACD;AACD,SAAO,KAAP;AACD;;AAEM,SAASP,gBAAT,CAA0BL,OAA1B,EAAmC;AACxC,SAAO;AACLc,QAAId,QAAQc,EADP;AAELC,eAAWf,QAAQe,SAFd;AAGLC,gBAAYhB,QAAQgB,UAHf;AAILC,QAAIjB,QAAQkB,OAAR,CAAgBD,EAAhB,CAAmBE,GAAnB,CAAuBC,IAJtB;AAKLC,gBAAYrB,QAAQkB,OAAR,CAAgBD,EAAhB,CAAmBK,WAL1B;AAMLC,UAAMvB,QAAQkB,OAAR,CAAgBK,IAAhB,CAAqBJ,GAArB,CAAyBC,IAN1B;AAOLI,kBAAcxB,QAAQkB,OAAR,CAAgBK,IAAhB,CAAqBD,WAP9B;AAQLG,eAAWzB,QAAQyB,SAAR,IAAsB,IAAIC,IAAJ,CAAS1B,QAAQyB,SAAjB,CAAD,CAA8BE,OAA9B,EAR3B;AASLC,kBAAc5B,QAAQ4B,YATjB;AAULrB,cAAU,CAAC,CAACP,QAAQO,QAAR,GAAmBsB,KAV1B;AAWLC,cAAU,CAAC,CAAC9B,QAAQ8B,QAXf;AAYLC,cAAU,CAAC,CAAC/B,QAAQ+B,QAZf;AAaLC,kBAAc,CAAC,CAAChC,QAAQgC,YAbnB;AAcLC,mBAAe,CAAC,CAACjC,QAAQiC,aAdpB;AAeLC,iBAAa,CAAC,CAAClC,QAAQkC,WAflB;AAgBLC,eAAW,CAAC,CAACnC,QAAQkC,WAhBhB;AAiBLE,kBAAcpC,QAAQoC,YAAR,IAAwB,uBAAaC,IAjB9C;AAkBLC,kBAActC,QAAQsC,YAlBjB;AAmBLC,eAAW,CAAC,CAACvC,QAAQuC;AAnBhB,GAAP;AAqBD;;AAEM,SAASjC,MAAT,CAAgBN,OAAhB,EAAyB;AAC9B,SAAO,CAAC,EACNA,WACAA,QAAQe,SAAR,KAAsB,yBAAeyB,OADrC,IAEAxC,QAAQgB,UAAR,KAAuB,wBAAcyB,UAH/B,CAAR;AAKD;;AAEM,SAASlC,QAAT,CAAkBP,OAAlB,EAA2B;AAChC,SAAO,CAAC,EAAEA,WAAWA,QAAQgB,UAAR,KAAuB,wBAAc0B,MAAlD,CAAR;AACD","file":"webphoneHelper.js","sourcesContent":["import recordStatus from './recordStatus';\nimport sessionStatus from './sessionStatus';\nimport callDirections from '../../enums/callDirections';\n\nexport function isBrowerSupport() {\n  const isChrome = !!(navigator.userAgent.match(/Chrom(e|ium)/));\n  if (!isChrome) {\n    return false;\n  }\n  const chromeVersion =\n    parseInt(navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./)[2], 10);\n  if (chromeVersion >= 51) {\n    return true;\n  }\n  return false;\n}\n\nexport function normalizeSession(session) {\n  return {\n    id: session.id,\n    direction: session.direction,\n    callStatus: session.callStatus,\n    to: session.request.to.uri.user,\n    toUserName: session.request.to.displayName,\n    from: session.request.from.uri.user,\n    fromUserName: session.request.from.displayName,\n    startTime: session.startTime && (new Date(session.startTime)).getTime(),\n    creationTime: session.creationTime,\n    isOnHold: !!session.isOnHold().local,\n    isOnMute: !!session.isOnMute,\n    isOnFlip: !!session.isOnFlip,\n    isOnTransfer: !!session.isOnTransfer,\n    isToVoicemail: !!session.isToVoicemail,\n    isForwarded: !!session.isForwarded,\n    isReplied: !!session.isForwarded,\n    recordStatus: session.recordStatus || recordStatus.idle,\n    contactMatch: session.contactMatch,\n    minimized: !!session.minimized,\n  };\n}\n\nexport function isRing(session) {\n  return !!(\n    session &&\n    session.direction === callDirections.inbound &&\n    session.callStatus === sessionStatus.connecting\n  );\n}\n\nexport function isOnHold(session) {\n  return !!(session && session.callStatus === sessionStatus.onHold);\n}\n\nexport async function sendReceiveConfirm(session) {\n  try {\n    await session.sendReceiveConfirm();\n  } catch (error) {\n    console.error(`failed to send receive confirmation via SIP MESSAGE due to ${error}`);\n  }\n}\n"]}