{"version":3,"sources":["modules/Softphone/index.js"],"names":["Softphone","brand","options","_brand","phoneNumber","frame","document","createElement","style","display","uri","protocol","encodeURIComponent","body","appendChild","contentWindow","location","href","removeChild","id","ready"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;IAEqBA,S;;;AACnB,2BAGG;AAAA,QAFDC,KAEC,QAFDA,KAEC;AAAA,QADEC,OACF;AAAA;;AAAA,uKAEIA,OAFJ;;AAID,UAAKC,MAAL,GAAcF,KAAd;AAJC;AAKF;;;;;8FAacG,W;;;;;;AACPC,qB,GAAQC,SAASC,aAAT,CAAuB,QAAvB,C;;AACdF,sBAAMG,KAAN,CAAYC,OAAZ,GAAsB,MAAtB;;AAEMC,mB,GAAS,KAAKC,Q,uBAA0BC,mBAAmBR,WAAnB,C;;;AAE9CE,yBAASO,IAAT,CAAcC,WAAd,CAA0BT,KAA1B;;uBACM,qBAAM,GAAN,C;;;AACNA,sBAAMU,aAAN,CAAoBC,QAApB,CAA6BC,IAA7B,GAAoCP,GAApC;;uBACM,qBAAM,GAAN,C;;;AACNJ,yBAASO,IAAT,CAAcK,WAAd,CAA0Bb,KAA1B;;;;;;;;;;;;;;;;;AAGF;;;;wBAzBe;AACb,cAAQ,KAAKF,MAAL,CAAYgB,EAApB;AACE,aAAK,MAAL;AAAa;AACX,iBAAO,SAAP;AACF,aAAK,MAAL;AAAa;AACX,iBAAO,YAAP;AACF,aAAK,MAAL;AAAa;AACX,iBAAO,SAAP;AACF;AACE,iBAAO,UAAP;AARJ;AAUD;;;wBAeY;AACX,aAAO,uBAAaC,KAApB;AACD;;AAED;;;;wBACY;AACV,aAAO,IAAP;AACD;;;;;kBA3CkBpB,S","file":"index.js","sourcesContent":["import RcModule from '../../lib/RcModule';\nimport moduleStatus from '../../enums/moduleStatus';\nimport sleep from '../../lib/sleep';\n\nexport default class Softphone extends RcModule {\n  constructor({\n    brand,\n    ...options\n  }) {\n    super({\n      ...options,\n    });\n    this._brand = brand;\n  }\n  get protocol() {\n    switch (this._brand.id) {\n      case '3420': // ATT\n        return 'attvr20';\n      case '7710': // BT\n        return 'rcbtmobile';\n      case '7310': // TELUS\n        return 'rctelus';\n      default:\n        return 'rcmobile';\n    }\n  }\n  async makeCall(phoneNumber) {\n    const frame = document.createElement('iframe');\n    frame.style.display = 'none';\n\n    const uri = `${this.protocol}://call?number=${encodeURIComponent(phoneNumber)}`;\n\n    document.body.appendChild(frame);\n    await sleep(100);\n    frame.contentWindow.location.href = uri;\n    await sleep(300);\n    document.body.removeChild(frame);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  get status() {\n    return moduleStatus.ready;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  get ready() {\n    return true;\n  }\n\n}\n"]}