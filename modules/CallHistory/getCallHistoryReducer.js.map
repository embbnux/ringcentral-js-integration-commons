{"version":3,"sources":["modules/CallHistory/getCallHistoryReducer.js"],"names":["getCallHistoryReducer","getEndedCallsReducer","types","state","type","endedCalls","timestamp","addEndedCalls","concat","map","call","duration","Math","floor","startTime","removeEndedCalls","filter","find","shouldRemove","sessionId","resetSuccess","status"],"mappings":";;;;;;;;;;kBAyBwBA,qB;;AAzBxB;;AACA;;;;;;AAEA,SAASC,oBAAT,CAA8BC,KAA9B,EAAqC;AACnC,SAAO,YAAiD;AAAA,QAAhDC,KAAgD,uEAAxC,EAAwC;AAAA;AAAA,QAAlCC,IAAkC,QAAlCA,IAAkC;AAAA,QAA5BC,UAA4B,QAA5BA,UAA4B;AAAA,QAAhBC,SAAgB,QAAhBA,SAAgB;;AACtD,YAAQF,IAAR;AACE,WAAKF,MAAMK,aAAX;AACE,eAAOJ,MAAMK,MAAN,CAAaH,WAAWI,GAAX,CAAe;AAAA,4CAC9BC,IAD8B;AAEjCC,sBAAUC,KAAKC,KAAL,CAAW,CAACP,YAAYI,KAAKI,SAAlB,IAA+B,IAA1C;AAFuB;AAAA,SAAf,CAAb,CAAP;AAIF,WAAKZ,MAAMa,gBAAX;AACE,eAAOZ,MAAMa,MAAN,CAAa;AAAA,iBAClB,CAACX,WAAWY,IAAX,CAAgB;AAAA,mBAAgBC,aAAaC,SAAb,KAA2BT,KAAKS,SAAhD;AAAA,WAAhB,CADiB;AAAA,SAAb,CAAP;AAGF,WAAKjB,MAAMkB,YAAX;AACE,eAAO,EAAP;AACF;AACE,eAAOjB,KAAP;AAbJ;AAeD,GAhBD;AAiBD;;AAGD;AACe,SAASH,qBAAT,CAA+BE,KAA/B,EAAsC;AACnD,SAAO,4BAAgB;AACrBmB,YAAQ,sCAAuBnB,KAAvB,CADa;AAErBG,gBAAYJ,qBAAqBC,KAArB;AAFS,GAAhB,CAAP;AAID","file":"getCallHistoryReducer.js","sourcesContent":["import { combineReducers } from 'redux';\nimport getModuleStatusReducer from '../../lib/getModuleStatusReducer';\n\nfunction getEndedCallsReducer(types) {\n  return (state = [], { type, endedCalls, timestamp }) => {\n    switch (type) {\n      case types.addEndedCalls:\n        return state.concat(endedCalls.map(call => ({\n          ...call,\n          duration: Math.floor((timestamp - call.startTime) / 1000),\n        })));\n      case types.removeEndedCalls:\n        return state.filter(call => (\n          !endedCalls.find(shouldRemove => shouldRemove.sessionId === call.sessionId)\n        ));\n      case types.resetSuccess:\n        return [];\n      default:\n        return state;\n    }\n  };\n}\n\n\n/* istanbul ignore next: unnecessary to test getModuleStatusReducer */\nexport default function getCallHistoryReducer(types) {\n  return combineReducers({\n    status: getModuleStatusReducer(types),\n    endedCalls: getEndedCallsReducer(types),\n  });\n}\n"]}