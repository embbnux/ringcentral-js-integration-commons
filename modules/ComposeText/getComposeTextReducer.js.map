{"version":3,"sources":["modules/ComposeText/getComposeTextReducer.js"],"names":["getSenderNumber","getTypingToNumber","getToNumberEntityReducer","getToNumbers","getMessageText","getComposeTextReducer","types","state","type","number","updateSenderNumber","updateTypingToNumber","clean","cleanTypingToNumber","entityId","toNumberMatched","newState","oldNumber","addToNumber","find","phoneNumber","item","push","removeToNumber","filter","text","updateMessageText","status","senderNumber","typingToNumber","toNumbers","messageText","toNumberEntity"],"mappings":"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","file":"getComposeTextReducer.js","sourcesContent":["import 'core-js/fn/array/find';\nimport { combineReducers } from 'redux';\nimport getModuleStatusReducer from '../../lib/getModuleStatusReducer';\n\nexport function getSenderNumber(types) {\n  return (state = '', { type, number }) => {\n    switch (type) {\n      case types.updateSenderNumber:\n        return number;\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getTypingToNumber(types) {\n  return (state = '', { type, number }) => {\n    switch (type) {\n      case types.updateTypingToNumber:\n        return number;\n      case types.clean:\n      case types.cleanTypingToNumber:\n        return '';\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getToNumberEntityReducer(types) {\n  return (state = '', { type, entityId }) => {\n    switch (type) {\n      case types.toNumberMatched:\n        return entityId;\n      case types.clean:\n      case types.cleanTypingToNumber:\n        return '';\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getToNumbers(types) {\n  return (state = [], { type, number }) => {\n    const newState = state;\n    let oldNumber = null;\n    switch (type) {\n      case types.addToNumber:\n        oldNumber = newState.find(item => (\n          number.phoneNumber === item.phoneNumber\n        ));\n        if (oldNumber) {\n          return newState;\n        }\n        newState.push(number);\n        return newState;\n      case types.removeToNumber:\n        return state.filter((item) => (\n          item.phoneNumber !== number.phoneNumber\n        ));\n      case types.clean:\n        return [];\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getMessageText(types) {\n  return (state = '', { type, text }) => {\n    switch (type) {\n      case types.updateMessageText:\n        return text;\n      case types.clean:\n        return '';\n      default:\n        return state;\n    }\n  };\n}\n\nexport default function getComposeTextReducer(types) {\n  return combineReducers({\n    status: getModuleStatusReducer(types),\n    senderNumber: getSenderNumber(types),\n    typingToNumber: getTypingToNumber(types),\n    toNumbers: getToNumbers(types),\n    messageText: getMessageText(types),\n    toNumberEntity: getToNumberEntityReducer(types),\n  });\n}\n"]}