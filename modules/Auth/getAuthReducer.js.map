{"version":3,"sources":["modules/Auth/getAuthReducer.js"],"names":["getLoginStatusReducer","getOwnerIdReducer","getEndpointIdReducer","getFreshLoginReducer","getProxyLoadedReducer","getProxyRetryCountReducer","getAuthReducer","types","state","type","loggedIn","refreshTokenValid","login","loggingIn","loginSuccess","refreshSuccess","cancelLogout","loginError","logoutSuccess","logoutError","notLoggedIn","refreshError","logout","loggingOut","beforeLogout","initSuccess","tabSync","token","owner_id","endpoint_id","proxyLoaded","proxyCleared","proxySetup","proxyRetry","status","loginStatus","freshLogin","ownerId","endpointId","proxyRetryCount"],"mappings":"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","file":"getAuthReducer.js","sourcesContent":["import { combineReducers } from 'redux';\nimport loginStatus from './loginStatus';\nimport getModuleStatusReducer from '../../lib/getModuleStatusReducer';\n\nexport function getLoginStatusReducer(types) {\n  return (state = null, { type, loggedIn, refreshTokenValid }) => {\n    switch (type) {\n      case types.login:\n        return loginStatus.loggingIn;\n\n      case types.loginSuccess:\n      case types.refreshSuccess:\n      case types.cancelLogout:\n        return loginStatus.loggedIn;\n\n      case types.loginError:\n      case types.logoutSuccess:\n      case types.logoutError:\n        return loginStatus.notLoggedIn;\n\n      case types.refreshError:\n        return refreshTokenValid ? state : loginStatus.notLoggedIn;\n\n      case types.logout:\n        return loginStatus.loggingOut;\n\n      case types.beforeLogout:\n        return loginStatus.beforeLogout;\n\n      case types.initSuccess:\n      case types.tabSync:\n        return loggedIn ? loginStatus.loggedIn : loginStatus.notLoggedIn;\n\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getOwnerIdReducer(types) {\n  return (state = null, { type, token, refreshTokenValid }) => {\n    switch (type) {\n\n      case types.loginSuccess:\n      case types.refreshSuccess:\n        return token.owner_id;\n\n      case types.loginError:\n      case types.logoutSuccess:\n      case types.logoutError:\n        return null;\n\n      case types.refreshError:\n        return refreshTokenValid ? state : null;\n\n      case types.initSuccess:\n      case types.tabSync:\n        return (token && token.owner_id) || null;\n\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getEndpointIdReducer(types) {\n  return (state = null, { type, token, refreshTokenValid }) => {\n    switch (type) {\n\n      case types.loginSuccess:\n      case types.refreshSuccess:\n        return token.endpoint_id;\n\n      case types.loginError:\n      case types.logoutSuccess:\n      case types.logoutError:\n        return null;\n\n      case types.refreshError:\n        return refreshTokenValid ? state : null;\n\n      case types.initSuccess:\n      case types.tabSync:\n        return (token && token.endpoint_id) || null;\n\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getFreshLoginReducer(types) {\n  return (state = null, { type, loggedIn }) => {\n    switch (type) {\n\n      case types.initSuccess:\n      case types.tabSync:\n        return loggedIn ? false : null;\n\n      case types.login:\n        return true;\n\n      case types.loginError:\n      case types.refreshError:\n      case types.logoutSuccess:\n      case types.logoutError:\n        return null;\n\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getProxyLoadedReducer(types) {\n  return (state = false, { type }) => {\n    switch (type) {\n      case types.proxyLoaded:\n        return true;\n      case types.proxyCleared:\n        return false;\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getProxyRetryCountReducer(types) {\n  return (state = 0, { type }) => {\n    switch (type) {\n      case types.proxySetup:\n      case types.proxyCleared:\n      case types.proxyLoaded:\n        return 0;\n      case types.proxyRetry:\n        return state + 1;\n      default:\n        return state;\n    }\n  };\n}\n\nexport default function getAuthReducer(types) {\n  return combineReducers({\n    status: getModuleStatusReducer(types),\n    loginStatus: getLoginStatusReducer(types),\n    freshLogin: getFreshLoginReducer(types),\n    ownerId: getOwnerIdReducer(types),\n    endpointId: getEndpointIdReducer(types),\n    proxyLoaded: getProxyLoadedReducer(types),\n    proxyRetryCount: getProxyRetryCountReducer(types),\n  });\n}\n"]}