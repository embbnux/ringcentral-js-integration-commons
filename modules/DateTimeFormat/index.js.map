{"version":3,"sources":["modules/DateTimeFormat/index.js"],"names":["DateTimeFormat","locale","options","actionTypes","_locale","_reducer","_formatters","pending","ready","_shouldInit","store","dispatch","type","init","_defaultFormatter","initSuccess","_shouldReset","reset","resetSuccess","_store","subscribe","_onStateChange","name","formatter","Error","utcTimestamp","currentLocale","formatDateTime","state","status"],"mappings":"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","file":"index.js","sourcesContent":["import RcModule from '../../lib/RcModule';\nimport ensureExist from '../../lib/ensureExist';\nimport getIntlDateTimeFormatter from '../../lib/getIntlDateTimeFormatter';\nimport actionTypes from './actionTypes';\nimport getDateTimeFormatReducer from './getDateTimeFormatReducer';\nimport moduleStatus from '../../enums/moduleStatus';\n\n/**\n * @class DateTimeFormat\n * @description Simple date and time formatting manager.\n */\nexport default class DateTimeFormat extends RcModule {\n  constructor({\n    locale,\n    ...options,\n  }) {\n    super({\n      ...options,\n      actionTypes,\n    });\n    this._locale = ensureExist(locale, 'locale');\n\n    this._reducer = getDateTimeFormatReducer(this.actionTypes);\n\n    this._formatters = {};\n  }\n  _shouldInit() {\n    return this.pending && this._locale.ready;\n  }\n  _shouldReset() {\n    return this.ready && !this._locale.ready;\n  }\n  _onStateChange() {\n    if (this._shouldInit()) {\n      this.store.dispatch({\n        type: this.actionTypes.init,\n      });\n      this._defaultFormatter = getIntlDateTimeFormatter();\n      this.store.dispatch({\n        type: this.actionTypes.initSuccess,\n      });\n    } else if (this._shouldReset()) {\n      this.store.dispatch({\n        type: this.actionTypes.reset,\n      });\n      this.store.dispatch({\n        type: this.actionTypes.resetSuccess,\n      });\n    }\n  }\n  initialize() {\n    this._store.subscribe(() => this._onStateChange);\n  }\n  addFormatter({\n    name,\n    formatter,\n  }) {\n    if (!name) {\n      throw new Error('`name` property cannot be empty.');\n    }\n    if (this._formatters[name]) {\n      throw new Error(`A formatter with the same name: ${name} already exists.`);\n    }\n    if (typeof formatter !== 'function') {\n      throw new Error('formatter must be a function.');\n    }\n    this._formatters[name] = formatter;\n  }\n\n  formatDateTime({\n    name,\n    utcTimestamp,\n    locale = this._locale.currentLocale,\n    type,\n  }) {\n    if (name && typeof this._formatters[name] === 'function') {\n      return this._formatters[name]({\n        utcTimestamp,\n        locale,\n        type,\n      });\n    }\n    return this._defaultFormatter({\n      utcTimestamp,\n      locale,\n      type,\n    });\n  }\n  formatDate({\n    name,\n    utcTimestamp,\n    locale,\n  }) {\n    return this.formatDateTime({\n      name,\n      utcTimestamp,\n      locale,\n      type: 'date',\n    });\n  }\n  formatTime({\n    name,\n    utcTimestamp,\n    locale,\n  }) {\n    return this.formatDateTime({\n      name,\n      utcTimestamp,\n      locale,\n      type: 'time',\n    });\n  }\n\n  get status() {\n    return this.state.status;\n  }\n\n  get ready() {\n    return this.state.status === moduleStatus.ready;\n  }\n\n  get pending() {\n    return this.state.status === moduleStatus.pending;\n  }\n}\n"]}