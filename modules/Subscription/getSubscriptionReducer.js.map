{"version":3,"sources":["modules/Subscription/getSubscriptionReducer.js"],"names":["getCachedSubscriptionReducer","getSubscriptionStatusReducer","getMessageReducer","getFiltersReducer","getSubscriptionReducer","types","state","type","subscription","renewSuccess","subscribeSuccess","removeSuccess","subscribeError","renewError","notSubscribed","subscribe","subscribing","subscribed","resetSuccess","removeError","remove","unsubscribing","message","notification","filters","setFilters","addFilters","filterMap","concat","filter","f","removeFilters","forEach","status","subscriptionStatus"],"mappings":"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","file":"getSubscriptionReducer.js","sourcesContent":["import { combineReducers } from 'redux';\nimport getModuleStatusReducer from '../../lib/getModuleStatusReducer';\nimport subscriptionStatus from './subscriptionStatus';\n\nexport function getCachedSubscriptionReducer(types) {\n  return (state = null, { type, subscription }) => {\n    switch (type) {\n      case types.renewSuccess:\n      case types.subscribeSuccess:\n        return subscription;\n\n      case types.removeSuccess:\n      case types.subscribeError:\n      case types.renewError:\n        return null;\n\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getSubscriptionStatusReducer(types) {\n  return (state = subscriptionStatus.notSubscribed, { type }) => {\n    switch (type) {\n      case types.subscribe:\n        return subscriptionStatus.subscribing;\n\n      case types.subscribeSuccess:\n      case types.renewSuccess:\n        return subscriptionStatus.subscribed;\n\n      case types.renewError:\n      case types.resetSuccess:\n      case types.removeSuccess:\n      case types.removeError:\n      case types.subscribeError:\n        return subscriptionStatus.notSubscribed;\n\n      case types.remove:\n        return subscriptionStatus.unsubscribing;\n\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getMessageReducer(types) {\n  return (state = null, { type, message = state }) => {\n    if (type === types.notification) return message;\n    return state;\n  };\n}\n\n\nexport function getFiltersReducer(types) {\n  return (state = [], { type, filters }) => {\n    switch (type) {\n      case types.setFilters:\n        return filters;\n\n      case types.addFilters: {\n        const filterMap = {};\n        return state.concat(filters).filter((f) => {\n          if (!filterMap[f]) {\n            filterMap[f] = true;\n            return true;\n          }\n          return false;\n        });\n      }\n      case types.removeFilters: {\n        const filterMap = {};\n        filters.forEach((f) => {\n          filterMap[f] = true;\n        });\n        return state.filter(f => !filterMap[f]);\n      }\n      case types.resetSuccess:\n        return [];\n\n      default:\n        return state;\n    }\n  };\n}\n\n\nexport default function getSubscriptionReducer(types) {\n  return combineReducers({\n    status: getModuleStatusReducer(types),\n    message: getMessageReducer(types),\n    filters: getFiltersReducer(types),\n    subscriptionStatus: getSubscriptionStatusReducer(types),\n  });\n}\n"]}